---
title: 142.Ring linkedII.md
date: '2024.01.01 0:00'
tags:
  - - Python
  - - answer
abbrlink: e2c9cca9
---

[//]: # ()
[//]: # (# topic：)

[//]: # (<p>Given the head node of a linked list &nbsp;<code>head</code>&nbsp;，The first node returning to the linked list to start the ring。&nbsp;<em>If the linked linked linked，Then return&nbsp;<code>null</code>。</em></p>)

[//]: # ()
[//]: # (<p>If there is a node in the linked list，Can be tracked continuously <code>next</code> The pointer arrives again，Then there is a ring in the linked list。 To show the ring in the linked list，Internal use of the evaluation system <code>pos</code> Let's represent the position connected to the linked list to the position of the linked list（<strong>Index 0 start</strong>）。if <code>pos</code> yes <code>-1</code>，There is no ring in this linked list。<strong>Notice：<code>pos</code> Pass the non -as a parameter</strong>，仅仅yes为了标识Linked的实际情况。</p>)

[//]: # ()
[//]: # (<p><strong>Modification is not allowed </strong>Linked。</p>)

[//]: # ()
[//]: # (<ul> )

[//]: # (</ul>)

[//]: # ()
[//]: # (<p>&nbsp;</p>)

[//]: # ()
[//]: # (<p><strong>Exemplary example 1：</strong></p>)

[//]: # ()
[//]: # (<p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist.png" /></p>)

[//]: # ()
[//]: # (<pre>)

[//]: # (<strong>enter：</strong>head = [3,2,0,-4], pos = 1)

[//]: # (<strong>Output：</strong>Back indexes 1 的Linked节点)

[//]: # (<strong>explain：</strong>Linked中have一indivual环，The tail is connected to the second node。)

[//]: # (</pre>)

[//]: # ()
[//]: # (<p><strong>Exemplary example&nbsp;2：</strong></p>)

[//]: # ()
[//]: # (<p><img alt="" src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test2.png" /></p>)

[//]: # ()
[//]: # (<pre>)

[//]: # (<strong>enter：</strong>head = [1,2], pos = 0)

[//]: # (<strong>Output：</strong>Back indexes 0 的Linked节点)

[//]: # (<strong>explain：</strong>Linked中have一indivual环，The tail is connected to the first node。)

[//]: # (</pre>)

[//]: # ()
[//]: # (<p><strong>Exemplary example 3：</strong></p>)

[//]: # ()
[//]: # (<p><img alt="" src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test3.png" /></p>)

[//]: # ()
[//]: # (<pre>)

[//]: # (<strong>enter：</strong>head = [1], pos = -1)

[//]: # (<strong>Output：</strong>return null)

[//]: # (<strong>explain：</strong>Linked中没have环。)

[//]: # (</pre>)

[//]: # ()
[//]: # (<p>&nbsp;</p>)

[//]: # ()
[//]: # (<p><strong>hint：</strong></p>)

[//]: # ()
[//]: # (<ul> )

[//]: # ( <li>Linked中节点的数目范围在范围 <code>[0, 10<sup>4</sup>]</code> Inside</li> )

[//]: # ( <li><code>-10<sup>5</sup> &lt;= Node.val &lt;= 10<sup>5</sup></code></li> )

[//]: # ( <li><code>pos</code> Value <code>-1</code> 或者Linked中的一indivualhave效索引</li> )

[//]: # (</ul>)

[142.Ring listII.md](https://leetcode.cn/problems/linked-list-cycle-ii/)

# Thought：
### Problem -solving：
这类Linkedtopic一般都yes使用双pointer法解决的，For example, looking for distance tail K Node、Find a ring entrance、Find the entrance of the public tail, etc.。
### Algorithm：
1. Double pointer met for the first time： Set two pointers fast，slow 指向Linked头部 head，fast Walk per round 2 step，slow Walk per round 1 step；

    a. First result： fast pointer走过Linked末端，说明Linked无环，直接return null；

    .TIPS: If there is a ring，Two pointers will definitely meet。Because every time I go 1 wheel，fast and slow Pitch +1，fast The event will catch up slow；
    b. Second result： whenfast == slowhour， Two pointers in the ring First encounter 。下面分析此hourfast and slowPassing step数关系 ：

    .设Linked共have a+b Node，in Linked头部到Linked入口 have a Node（不计Linked入口节点）， Linked环 have b Node（这里需要Notice，a and b yes未知数，例如图解上Linked a=4 , b=5）；Set two pointers分别走了 f，s step，则have：
    a. fast 走的step数yesslowstep数的 2 Double，Right now f=2s；（Analyze： fast Walk per round 2 step）
    b.fast Compare slowGo more n Length of a ring，Right now f=s+nb；（ Analyze： Double pointers have gone through a step，然后在环Inside绕圈直到重合，重合hour fast Compare slow Go 环的长度整数Double ）；
    .The above two types are reduced：f=2nb，s=nb，Right nowfastandslow The pointer left separately 2n，n indivual Circumference of the ring （Notice： n yes未知数，不同Linked的情况不同）。

<!--more-->

2. Current situation analysis：

    .if让pointer从Linked头部一直向前走并统计step数k，那么所have 走到Linked入口节点hour的step数 yes：k=a+nb（Leave first a step到入口节点，Over time 1 Ring（ b step）I will go to the entrance node again）。
    
    ..Current，slow pointerPassingstep数为 nb step。therefore，We just find a way slow Go again a step停下来，You can get to the entrance to the ring。
    
   ...但yes我们不知道 a Value，what to do？依然yes使用双pointer法。我们构建一indivualpointer，此pointer需要have以下性质：此pointerandslow Go forward together a step后，The two nodes at the entrance re -coincide。So where does it need to get to the entrance node? a step？答案yesLinked头部head。

3. Double pointer met for the second time：
    .slowpointer Unchanged position ，Willfastpointer重新 指向Linked头部节点 ；slowandfast同hour每wheel向前走 1 step；

    ..TIPS：此hour f=0，s=nb ；
    ...when fast pointer走到f=a stephour，slow pointer走到steps=a+nb，此hour 两pointer重合，并同hour指向Linked环入口 。

4. returnslowpointer指向的节点。

### Complexity analysis：
hour间复杂度 O(N) ：In the second encounter，慢pointer须走step数 a<a+b；First encounter中，慢pointer须走step数 a+b−x<a+b，in x 为双pointer重合点and环入口距离；therefore总体为线性复杂度；
Spatial complexity O(1) ：双pointer使用常数大小的额外空间。
<img src="../photos/circle link array 2/Picture1.png" alt="Picture1.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture2.png" alt="Picture2.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture3.png" alt="Picture3.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture4.png" alt="Picture4.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture5.png" alt="Picture5.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture6.png" alt="Picture6.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture7.png" alt="Picture7.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture8.png" alt="Picture8.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture9.png" alt="Picture9.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture10.png" alt="Picture10.png" width="50%" height="50%">
<img src="../photos/circle link array 2/Picture11.png" alt="Picture11.png" width="50%" height="50%">



# Code：

```python
class Solution:
    def detectCycle(self, head: Optional[ListNode]) -> Optional[ListNode]:
        a = head
        b = head
        while True:
            if not b or not b.next:
                return None
            a = a.next
            b = b.next.next
            if b == a:
                break
        b = head
        while a != b:
            a, b = a.next, b.next
        return b
```
```cpp
class Solution {
public:
    ListNode *detectCycle(ListNode *head) {
        ListNode *a = head;
        ListNode *b = head;
        while (true) {
            if (!b or !b->next) {
                return nullptr;
            }
            a = a->next;
            b = b->next->next;
            //becauseb每次走两step，soabMust meet
            if (a == b) {
                break;
            }
        }
        // After meetingaWait in placeb, b去Linked头部
        b = head;
        while(a!=b){
            a = a->next;
            b = b->next;
        }

        return a;
    }
};
```